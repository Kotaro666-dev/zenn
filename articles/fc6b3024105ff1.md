---
title: "Flutter開発者がAndroidネイティブ開発してみた"
emoji: "🐡"
type: "tech"
topics: ["flutter", "Android", "Kotlin", "dart"]
published: false
---

こんにちは、42tokyo Advent Calendar 2021 の 20 日目を担当する、在校生の [kkamashi](https://twitter.com/Kotaro666_dev) です。

今回は、Flutter 開発者が Android ネイティブ開発してみて率直に思ったことを書き記してみたいと思います。

ネイティブ開発から Flutter 開発を始める人は数多くいるものの、Flutter 開発からモバイルアプリ開発を始めて、その後ネイティブ開発をしてみる人はあまりいないと思うので、私のような例は珍しいのではないかと思います。

そのため、今回の記事で現在は Flutter 開発していて、 Android ネイティブ開発してみようかなと思う人に役立てば良いなと思います。

結論から言えば、Flutter 開発よりも楽しくネイティブ開発ができています。

# Flutter とは？

そもそも、Flutter とは何なのか分からない人もいると思うので、冒頭で簡単に説明したいと思います。

Flutter は、クロスプラットフォームの開発フレームワークとして Android / iOS 向けのアプリケーション開発をすることができます。

これまでは、iOS 向けアプリは Swift/Objective-C で開発し、Android 向けアプリは Kotlin/Java で開発する必要があり、どちらの OS でもアプリをリリースしたい場合は、別々の言語で開発して、別々のソースコードを書いていく必要がありました。

その一方で、Flutter そして開発言語 Dart を使用すれば、一つのソースコードを用意するだけで、iOS/Android どちらでも動くアプリを作ることができます。

Flutter 開発のメリットは以下の記事が参考になります。

[Flutter とは？ エヌ次元が企業として Flutter 開発を採用する理由](https://nzigen.com/nzigen-flutter/)

# なぜ Android 開発を始めたか

そもそも、なぜ Android ネイティブ開発をしてみようと思ったのか。

そのきっかけは単純で、業務で新しくアサインされたプロジェクトがネイティブ開発だったからです。

社内でちらほらネイティブ案件が来るという噂は聞いていましたが、私が担当する日がこんなに早く来るとはあまり想像していませんでした。

なぜならば、モバイルアプリ開発に対する情熱が失せてきて、違う分野、例えばサーバーサイド側を担当したいと会社に伝えていたからです。

ただし、弊社はモバイルアプリ開発が事業の中心の一つであり、私が今後もモバイルアプリ開発に携わるならば、ネイティブ開発の経験は欲しいと思っていました。

その理由は、モバイルアプリ開発をより深く理解するためにはネイティブ開発をしてみたほうが良いと思うからです。世の Flutter 強強エンジニアの方々は、なんだかんだ言って、どちらかのネイティブ開発経験者が多いですしね。

そんなどっちつかずな気持ちの状態で、かつ知識ゼロの状態でアサインされて、開発がスタートしましたが...

Android 開発はめっちゃ楽しいです。
Flutter 開発より楽しく感じます。

# 良かった点

## Android 開発チームによる公式トレーニング教材やドキュメントの充実さ

僕は新しい言語やフレームワークの学習をする時には、Udemy や Youtube といった動画教材を使って、最初の一歩目を歩み始めます。

しかし、今回 Android 開発の一歩目は、そうした動画教材ではなく、以下の公式トレーニング教材を使用しました。

[Android Basics in Kotlin](https://developer.android.com/courses/android-basics-kotlin/course)

このトレーニング教材で用意されている UI 構築や画面遷移、HTTP 通信、DB 関係のコースを通じて、Android 開発の基礎を学習し、アサインされたプロジェクトの開発する準備を整えることができました。

また、それ以外にも公式ドキュメント[「デベロッパー ガイド」](https://developer.android.com/guide)はより深堀りする上で役に立ちましたし、現在でも参考にしています。

この公式ドキュメントには、日本語ページも用意されていますが、項目によっては情報が古かったりする場合があることにはご注意ください。

ちなみに、Flutter の公式ドキュメントも非常に優れていて、Flutter の実装で詰まったときには公式ドキュメントに答えが大抵書いてあります。

## 新しいアーキテクチャに触れることができた

これまでに携わってきた Flutter 開発では、Provider や flutter_redux といった状態管理手法を使った開発が主で、前者は画面単位、後者はアプリ全体に使用していました。
Provider のおかげで、UI 側から状態とビジネスロジックを切り離し、状態に変更があった場合に、changeNotifier や dispatch することで UI 側に通知していました。

その一方で、個人としてアーキテクチャに対してはあまり関心を払ってきませんでした。

Android 開発では、公式チームが MVVM （Model - View - ViewModel）というアーキテクチャが推奨されています。

今回アサインされたプロジェクトでは、この MVVM にクリーンアーキテクチャで提唱されている UseCase や画面遷移等の責務を持つ Coordinator を導入しました。

![](/images/mvvm_architecture.png)

出典：[アプリ アーキテクチャ ガイド](https://developer.android.com/jetpack/guide)

アーキテクチャに対する知識が浅かったため、ビジネスロジック実装の部分で大いに悩みました。

しかし、責務に応じた実装を心がけることで、どのファイルも肥大化することなく綺麗に分離することができ、気持ちの良さを感じています。
それと同時に、「アーキテクチャをより理解したい」という気持ちも芽生え、年末年始にたくさんのインプットをしたいなと思います。

ちなみに、先日には上記の引用画像で示した公式のアーキテクチャに変更が加わり、レイヤーごとに区分されるようになりました。
中身は大きく変化していませんが、新たにオプションとして UseCase（Domain レイヤー）の導入が加わりました。

![](/images/new_architecture.png)

出典：[Guide to app architecture](https://developer.android.com/jetpack/guide)

## Kotlin の存在

日々 Android 開発を進める上で Kotlin で書いていますが、楽しく開発を進められているのも Kotlin のおかげと言っても過言ではないです。

Kotlin の書きやすさ、書いていて感じる気持ちよさはこれまでに触れてきた言語の中でも一番に感じます。

Flutter の開発言語の Dart も同じく書きやすい言語ですが、Kotlin のように書いていて楽しいと感じることはあまりなかったように思います。

これは単純に相性の問題なのかもしれません。

## Android Studio

これまでの Flutter 開発では、JetBrains が開発する IDE Android Studio を使ってきました。

Android 開発でも引き続き、この Android Studio を使用していますが、Android 開発を通じて Android Studio をより好きになりましたし、この IDE の真骨頂を見れている気がします。

Flutter 開発時には、時として IDE が重くなったりすることがあり、ストレスに感じる経験があります。
それが主だった理由で、Android Studio から VS Code に移行する人もそれなりにいるようです。

そんな中、Android 開発になってからは、そのようなストレスを感じることがほぼなくなり、毎日快適に開発ができています。

そして、Flutter 開発ではできなかった IDE の最新バージョンへのアップデートもどんどん行うことができ、新しいツールを業務レベルで使っていくことができるのは楽しいなと思います。

## XML でのレイアウトの大変さと Jetpack Compose の未来

Android 開発での UI 構築は XML でレイアウトを書いていきます。

![](/images/xml_layout_example.png)

ただし、XML でレイアウトを書いていく工程はけっこう大変です。

まだまだ慣れていない部分がありますが、UI 構築では圧倒的に Flutter の方が楽です。

そんな中、Android でも Flutter や React のように宣言的に UI 構築ができるライブラリ[「Jetpack Compose」](https://developer.android.com/jetpack/compose)がリリースされました。

この Jetpack Compose はまだまだ不完全なところもあり、Jetpack Compose だけでは実現できない UI 構築もあるようですが、今後はこの Jetpack Compose が主流となり、効率的に UI 構築ができるようになりそうです。

## アプリのライフサイクルを意識して実装できること

## ネイティブ開発を通じて、Google の哲学をちゃんと知ることができた

# 悪かった点

## Flutter だったらこうやってできるのに...と考えてしまいがちだった

これは全く Android のせいではないですが、Android 開発当初には Flutter 開発の経験を基礎として考えて実装を進めていたため、「Flutter だったら...」と考えてしまいがちでした。

そのため、Flutter への哀愁を感じることもしばしばありましたが、途中からこれではいけないと思い立ち、Flutter は Flutter、Android 開発は Android 開発と切り離して実装作業を進めるようにしました。

それからは、これまで Flutter 側がやってくれていたことを開発者側でしっかりと考慮しないといけない部分に対しても、Android 開発の面白さを感じるようになりました。

## ググった際に、大分昔の情報がヒットする

##

# 結論

実は Flutter エンジニアとして働いているものの、Flutter に対して情熱を持って勉強したりすることはなく、「仕事だから」やっていた感じがあります。
そのため、「モバイルアプリ開発はもういいかな」と思い始め、個人でも Web 開発寄りの勉強をしたり、会社に対しても「サーバーサイド側をやりたい」と積極的にアピールしていました。

ただ、Android ネイティブ開発をしてみると、とても楽しい。
同じモバイルアプリ開発だけれども、Flutter とは大きく異なる楽しさを感じています。

正直に言って、Android ネイティブ開発にアサインされてからのこの 2 ヶ月に当てた Android ネイティブ開発での個人学習は、過去 1 年の Flutter のそれよりもすでに超えていると思います。

# 終わりに

アドベントカレンダーの方は、明日は snara-42 さんが「extreme coding 活動 プルリクチャレンジなど」というテーマで 21 日目を担当されるので、ぜひみなさんチェックしてくださいね！
